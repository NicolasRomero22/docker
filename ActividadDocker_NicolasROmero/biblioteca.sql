CREATE DATABASE IF NOT EXISTS biblioteca;
USE biblioteca;

CREATE TABLE libros (
	id_libro INT PRIMARY KEY AUTO_INCREMENT,
	titulo VARCHAR(250) NOT NULL,
	autor VARCHAR(250),
	fecha_publicacion YEAR,
	genero VARCHAR(100)
);
CREATE TABLE lectores (
	id_lector INT PRIMARY KEY AUTO_INCREMENT, 
	nombre VARCHAR(100) NOT NULL, 
	apellido VARCHAR(100) NOT NULL, 
	email VARCHAR(100), 
	telefono VARCHAR(15)
);

CREATE TABLE prestamos (
	id_prestamo INT PRIMARY KEY AUTO_INCREMENT, 
	id_lector INT, 
	id_libro INT, 
	FOREIGN KEY (id_libro) REFERENCES libros(id_libro) ON DELETE CASCADE,
	FOREIGN KEY (id_lector) REFERENCES lectores(id_lector) ON DELETE CASCADE, 
	fecha_prestamo DATE, fecha_devolucion DATE
);

CREATE TABLE reservas (
	id_reserva INT PRIMARY KEY AUTO_INCREMENT, 
	id_libro INT, 
	id_lector INT, 
	FOREIGN KEY(id_libro) REFERENCES libros(id_libro) ON DELETE CASCADE, 
	FOREIGN KEY (id_lector) REFERENCES lectores(id_lector) ON DELETE CASCADE, 
	fecha_reserva DATE, estado VARCHAR(50)
);

INSERT INTO Libros (titulo, autor, fecha_publicacion, genero) VALUES
    ('Cien aos de soledad', 'Gabriel Garca Mrquez', 1967, 'Novela'),
    ('El amor en los tiempos del clera', 'Gabriel Garca Mrquez', 1985, 'Novela'),
    ('1984', 'George Orwell', 1949, 'Distopa'),
    ('El principito', 'Antoine de Saint-Exupry', 1943, 'Fbula'),
    ('Don Quijote de la Mancha', 'Miguel de Cervantes', 1905, 'Novela'),
    ('Moby Dick', 'Herman Melville', 1951, 'Aventura'),
    ('Orgullo y prejuicio', 'Jane Austen', 1913, 'Romance'),
    ('Crimen y castigo', 'Fidor Dostoyevski', 1966, 'Novela'),
    ('El gran Gatsby', 'F. Scott Fitzgerald', 1925, 'Novela'),
    ('Cumbres borrascosas', 'Emily Bront', 1947, 'Novela'),
    ('El viejo y el mar', 'Ernest Hemingway', 1952, 'Novela'),
    ('La casa de los espritus', 'Isabel Allende', 1982, 'Novela'),
    ('El tnel', 'Ernesto Sabato', 1948, 'Novela'),
    ('Rayuela', 'Julio Cortzar', 1963, 'Novela'),
    ('Los miserables', 'Victor Hugo', 1962, 'Novela'),
    ('Fahrenheit 451', 'Ray Bradbury', 1953, 'Ciencia ficcin'),
    ('El retrato de Dorian Gray', 'Oscar Wilde', 1990, 'Novela'),
    ('La sombra del viento', 'Carlos Ruiz Zafn', 2001, 'Novela'),
    ('El alquimista', 'Paulo Coelho', 1988, 'Ficcin'),
    ('La tregua', 'Mario Benedetti', 1960, 'Novela'),
    ('El guardin entre el centeno', 'J.D. Salinger', 1951, 'Novela'),
    ('La metamorfosis', 'Franz Kafka', 1915, 'Novela'),
    ('El proceso', 'Franz Kafka', 1925, 'Novela'),
    ('Cien aos de soledad', 'Gabriel Garca Mrquez', 1967, 'Novela'),
    ('El tnel', 'Ernesto Sabato', 1948, 'Novela'),
    ('El amor en los tiempos del clera', 'Gabriel Garca Mrquez', 1985, 'Novela'),
    ('1984', 'George Orwell', 1949, 'Distopa'),
    ('El principito', 'Antoine de Saint-Exupry', 1943, 'Fbula'),
    ('Don Quijote de la Mancha', 'Miguel de Cervantes', 1905, 'Novela'),
    ('Moby Dick', 'Herman Melville', 1951, 'Aventura'),
    ('Orgullo y prejuicio', 'Jane Austen', 1913, 'Romance'),
    ('Crimen y castigo', 'Fidor Dostoyevski', 1966, 'Novela'),
    ('El gran Gatsby', 'F. Scott Fitzgerald', 1925, 'Novela'),
    ('Cumbres borrascosas', 'Emily Bront', 1947, 'Novela'),
    ('El viejo y el mar', 'Ernest Hemingway', 1952, 'Novela'),
    ('La casa de los espritus', 'Isabel Allende', 1982, 'Novela'),
    ('El tnel', 'Ernesto Sabato', 1948, 'Novela'),
    ('Rayuela', 'Julio Cortzar', 1963, 'Novela'),
    ('Los miserables', 'Victor Hugo', 1962, 'Novela'),
    ('Fahrenheit 451', 'Ray Bradbury', 1953, 'Ciencia ficcin'),
    ('El retrato de Dorian Gray', 'Oscar Wilde', 1989, 'Novela'),
    ('La sombra del viento', 'Carlos Ruiz Zafn', 2001, 'Novela'),
    ('El alquimista', 'Paulo Coelho', 1988, 'Ficcin'),
    ('La tregua', 'Mario Benedetti', 1960, 'Novela'),
    ('El guardin entre el centeno', 'J.D. Salinger', 1951, 'Novela'),
    ('La metamorfosis', 'Franz Kafka', 1915, 'Novela'),
    ('El proceso', 'Franz Kafka', 1925, 'Novela');

INSERT INTO Lectores (nombre, apellido, email, telefono) VALUES
    -> ('Juan', 'Prez', 'juan.perez@email.com', '1234567890'),
    -> ('Mara', 'Lpez', 'maria.lopez@email.com', '0987654321'),
    -> ('Carlos', 'Garca', 'carlos.garcia@email.com', '1122334455'),
    -> ('Ana', 'Martnez', 'ana.martinez@email.com', '2233445566'),
    -> ('Luis', 'Hernndez', 'luis.hernandez@email.com', '3344556677'),
    -> ('Sofa', 'Gonzlez', 'sofia.gonzalez@email.com', '4455667788'),
    -> ('Pedro', 'Ramrez', 'pedro.ramirez@email.com', '5566778899'),
    -> ('Laura', 'Torres', 'laura.torres@email.com', '6677889900'),
    -> ('Javier', 'Flores', 'javier.flores@email.com', '7788990011'),
    -> ('Claudia', 'Rojas', 'claudia.rojas@email.com', '8899001122'),
    -> ('Diego', 'Vsquez', 'diego.vasquez@email.com', '9900112233'),
    -> ('Valentina', 'Cruz', 'valentina.cruz@email.com', '1011121314'),
    -> ('Andrs', 'Morales', 'andres.morales@email.com', '1213141516'),
    -> ('Isabel', 'Jimnez', 'isabel.jimenez@email.com', '1314151617'),
    -> ('Fernando', 'Salazar', 'fernando.salazar@email.com', '1415161718'),
    -> ('Gabriela', 'Mendoza', 'gabriela.mendoza@email.com', '1516171819'),
    -> ('Ricardo', 'Ponce', 'ricardo.ponce@email.com', '1617181920'),
    -> ('Patricia', 'Soto', 'patricia.soto@email.com', '1718192021'),
    -> ('Hugo', 'Cceres', 'hugo.caceres@email.com', '1819202122'),
    -> ('Natalia', 'Bermdez', 'natalia.bermudez@email.com', '1920212223'),
    -> ('Felipe', 'Cordero', 'felipe.cordero@email.com', '2021222324'),
    -> ('Mariana', 'Pineda', 'mariana.pineda@email.com', '2122232425'),
    -> ('Santiago', 'Ceballos', 'santiago.ceballos@email.com', '2223242526'),
    -> ('Camila', 'Alvarez', 'camila.alvarez@email.com', '2324252627'),
    -> ('Emilio', 'Cruz', 'emilio.cruz@email.com', '2425262728'),
    -> ('Luca', 'Gmez', 'lucia.gomez@email.com', '2526272829'),
    -> ('Nicols', 'Salas', 'nicolas.salas@email.com', '2627282930'),
    -> ('Valeria', 'Ros', 'valeria.rios@email.com', '2728293031'),
    -> ('Joaqun', 'Mora', 'joaquin.mora@email.com', '2829303132'),
    -> ('Estefana', 'Prez', 'estefania.perez@email.com', '2930313233'),
    -> ('Alberto', 'Hernndez', 'alberto.hernandez@email.com', '3031323334'),
    -> ('Silvia', 'Lpez', 'silvia.lopez@email.com', '3132333435'),
    -> ('Rafael', 'Garca', 'rafael.garcia@email.com', '3233343536'),
    -> ('Diana', 'Martnez', 'diana.martinez@email.com', '3334353637'),
    -> ('Cristian', 'Torres', 'cristian.torres@email.com', '3435363738'),
    -> ('Marta', 'Rojas', 'marta.rojas@email.com', '3536373839'),
    -> ('Julin', 'Vsquez', 'julian.vasquez@email.com', '3637383940'),
    -> ('Cecilia', 'Cruz', 'cecilia.cruz@email.com', '3738394041'),
    -> ('Fernando', 'Salazar', 'fernando.salazar@email.com', '3839404142'),
    -> ('Gabriela', 'Mendoza', 'gabriela.mendoza@email.com', '3940414243'),
    -> ('Ricardo', 'Ponce', 'ricardo.ponce@email.com', '4041424344'),
    -> ('Patricia', 'Soto', 'patricia.soto@email.com', '4142434445'),
    -> ('Hugo', 'Cceres', 'hugo.caceres@email.com', '4243444546'),
    -> ('Natalia', 'Bermdez', 'natalia.bermudez@email.com', '4344454647'),
    -> ('Felipe', 'Cordero', 'felipe.cordero@email.com', '4445464748'),
    -> ('Mariana', 'Pineda', 'mariana.pineda@email.com', '4546474849'),
    -> ('Santiago', 'Ceballos', 'santiago.ceballos@email.com', '4647484950');

INSERT INTO Prestamos (id_libro, id_lector, fecha_prestamo, fecha_devolucion) VALUES
    (142, 1, '2023-01-10', '2023-01-20'),
    (143, 2, '2023-02-15', '2023-02-25'),
    (144, 3, '2023-03-05', '2023-03-15'),
    (145, 4,'2023-01-12', '2023-01-22'),
    (146, 5, '2023-02-18', '2023-02-28'),
    (147, 6, '2023-03-10', '2023-03-20'),
    (148, 7, '2023-01-14', '2023-01-24'),
    (144, 8, '2023-02-20', '2023-03-01'),
    (149, 9, '2023-03-12', '2023-03-22'),
    (150, 10, '2023-01-16', '2023-01-26'),
    (151, 11, '2023-02-22', '2023-03-04'),
    (152, 12, '2023-03-14', '2023-03-24'),
    (153, 13, '2023-01-18', '2023-01-28'),
    (154, 14, '2023-02-24', '2023-03-06'),
    (154, 15,'2023-03-16', '2023-03-26'),
    (165, 16,'2023-01-20', '2023-01-30'),
    (174, 17,'2023-02-26', '2023-03-08'),
    (154, 18,'2023-03-18', '2023-03-28'),
    (155, 19,'2023-01-22', '2023-02-01'),
    (156, 20,'2023-02-28', '2023-03-10'),
    (157, 21,'2023-03-20', '2023-03-30'),
    (159, 22,'2023-01-24', '2023-02-03'),
    (160, 23,'2023-02-28', '2023-03-12'),
    (161, 24, '2023-03-22', '2023-04-01'),
    (162, 25,'2023-01-26', '2023-02-06'),
    (163, 26,'2023-02-02', '2023-02-12'),
    (164, 27,'2023-03-24', '2023-04-03'),
    (165, 28, '2023-01-28', '2023-02-08'),
    (166, 29,'2023-02-04', '2023-02-14'),
    (167, 30,'2023-03-26', '2023-04-05'),
    (168, 31,'2023-01-30', '2023-02-09'),
    (169, 32,'2023-02-06', '2023-02-16'),
    (170, 33,'2023-03-28', '2023-04-07'),
    (171, 34,'2023-01-02', '2023-01-12'),
    (172, 35,'2023-02-08', '2023-02-18'),
    (173, 36,'2023-03-30', '2023-04-09'),
    (174, 37,'2023-01-04', '2023-01-14'),
    (175, 38,'2023-02-10', '2023-02-20'),
    (176, 39,'2023-03-02', '2023-03-12'),
    (170, 40,'2023-01-06', '2023-01-16'),
    (179, 41,'2023-02-12', '2023-02-22'),
    (156, 42,'2023-03-04', '2023-03-14'),
    (155, 42,'2023-01-08', '2023-01-18'),
    (160, 42,'2023-02-14', '2023-02-24'),
    (157, 43,'2023-03-06', '2023-03-16'),
    (144, 43,'2023-01-10', '2023-01-20'),
    (150, 43,'2023-02-16', '2023-02-26'),
    (151, 44,'2023-03-08', '2023-03-18'),
    (152, 45,'2023-01-12', '2023-01-22'),
    (153, 46,'2023-02-18', '2023-02-28');

INSERT INTO Reservas (id_libro, id_lector, fecha_reserva, estado) VALUES
    (142, 1, '2023-01-05', 'activa'),
    (143, 2, '2023-02-10', 'completada'),
    (144, 3, '2023-03-01', 'cancelada'),
    (145, 4, '2023-01-07', 'activa'),
    (146, 5, '2023-02-12', 'completada'),
    (147, 6, '2023-03-03', 'cancelada'),
    (148, 7, '2023-01-09', 'activa'),
    (149, 8, '2023-02-14', 'completada'),
    (150, 9, '2023-03-05', 'cancelada'),
    (151, 10, '2023-01-11', 'activa'),
    (152, 11, '2023-02-16', 'completada'),
    (153, 12, '2023-03-07', 'cancelada'),
    (154, 13, '2023-01-13', 'activa'),
    (155, 14, '2023-02-18', 'completada'),
    (156, 15, '2023-03-09', 'cancelada'),
    (157, 16, '2023-01-15', 'activa'),
    (158, 17, '2023-02-20', 'completada'),
    (159, 18, '2023-03-11', 'cancelada'),
    (160, 19, '2023-01-17', 'activa'),
    (161, 20, '2023-02-22', 'completada'),
    (162, 21, '2023-03-13', 'cancelada'),
    (163, 22, '2023-01-19', 'activa'),
    (164, 23, '2023-02-24', 'completada'),
    (165, 24, '2023-03-15', 'cancelada'),
    (166, 25, '2023-01-21', 'activa'),
    (167, 26, '2023-02-26', 'completada'),
    (168, 27, '2023-03-17', 'cancelada'),
    (169, 28, '2023-01-23', 'activa'),
    (170, 29, '2023-02-28', 'completada'),
    (171, 30, '2023-03-19', 'cancelada'),
    (172, 31, '2023-01-25', 'activa'),
    (173, 32, '2023-02-02', 'completada'),
    (174, 33, '2023-03-21', 'cancelada'),
    (175, 34, '2023-01-27', 'activa'),
    (176, 35, '2023-02-04', 'completada'),
    (177, 36, '2023-03-23', 'cancelada'),
    (178, 37, '2023-01-29', 'activa'),
    (179, 38, '2023-02-06', 'completada'),
    (180, 39, '2023-03-25', 'cancelada'),
    (181, 40, '2023-01-31', 'activa'),
    (182, 41, '2023-02-08', 'completada'),
    (183, 42, '2023-03-27', 'cancelada'),
    (184, 43, '2023-01-02', 'activa'),
    (185, 44, '2023-02-10', 'completada'),
    (186, 45, '2023-03-29', 'cancelada'),
    (187, 46, '2023-01-04', 'activa'),
    (188, 47, '2023-02-12', 'completada');
